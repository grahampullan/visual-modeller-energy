{"version":3,"file":"visual-modeller-energy.min.js","sources":["../node_modules/visual-modeller-core/build/visual-modeller-core.js","../src/EnergyNode.js","../src/ControllerNode.js","../src/GridExportNode.js","../src/GridSupplyNode.js","../src/EnergyLink.js","../src/LoadNode.js","../src/EnergyModel.js","../src/SolarPVNode.js"],"sourcesContent":["class Model {\n    constructor(options) {\n        this.nodes = options.nodes || [];\n        this.links = options.links || [];\n        this.logs = options.logs || [];\n        this.maxNodeId = 0;\n        this.maxLinkId = 0;\n        this.maxLogId = 0;\n    }\n\n    getNodeId() {\n        let newNodeId = `node-${this.maxNodeId}`;\n        this.maxNodeId++;\n        return newNodeId;\n    }\n\n    getLinkId() {\n        let newLinkId = `link-${this.maxLinkId}`;\n        this.maxLinkId++;\n        return newLinkId;\n    }\n\n    getLogId() {\n        let newLogId = `log-${this.maxLogId}`;\n        this.maxLogId++;\n        return newLogId;\n    }\n\n    addNode(node) {\n        node.id = this.getNodeId();\n        this.nodes.push(node);\n    }\n\n    addLink(link) {\n        link.id = this.getLinkId();\n        const s1 = link.socket1;\n        s1.link = link;\n        s1.otherSocket = link.socket2;\n        const s2 = link.socket2;\n        s2.link = link;\n        s2.otherSocket = link.socket1;\n        this.links.push(link);\n    }\n\n    addLog(log) {\n        log.id = this.getLogId();\n        this.logs.push(log);\n    }\n\n    removeNode(node) {\n        this.nodes = this.nodes.filter(n => n !== node);\n    }\n\n    removeLink(link) {\n        this.links = this.links.filter(l => l !== link);\n    }\n\n    removeLog(log) {\n        this.logs = this.logs.filter(l => l !== log);\n    }\n\n    removeNodeById(id) {\n        this.nodes = this.nodes.filter(n => n.id !== id);\n    }\n\n    removeLinkById(id) {\n        this.links = this.links.filter(l => l.id !== id);\n    }\n\n    removeLogById(id) {\n        this.logs = this.logs.filter(l => l.id !== id);\n    }\n\n    clearLogs() {\n        this.logs.forEach(l => l.clear());\n    }\n\n    getLinkBySocket(socket) {\n        return this.links.find(l => l.socket1 === socket || l.socket2 === socket);\n    }\n\n    getNodeBySocket(socket) {\n        return this.nodes.find(n => n.sockets.includes(socket));\n    }\n}\n\nclass Node {\n    constructor(options) {\n        this.name = options.name || 'node';\n        this.sockets = [];\n        this.state = options.state || {};\n        this.maxSocketId = 0;\n        if (options.sockets) {\n            options.sockets.forEach(socket => {\n                this.addSocket(socket);\n            });\n        }\n    }\n\n    getSocketId() {\n        let newSocketId = `socket-${this.maxSocketId}`;\n        this.maxSocketId++;\n        return newSocketId;\n    }\n\n    get leftSockets() {\n        return this.sockets.filter(s => s.position === 'left');\n    }\n\n    get rightSockets() {\n        return this.sockets.filter(s => s.position === 'right');\n    }\n\n    get topSockets() {\n        return this.sockets.filter(s => s.position === 'top');\n    }\n\n    get bottomSockets() {\n        return this.sockets.filter(s => s.position === 'bottom');\n    }\n    \n    addSocket(socket) {\n        socket.id = this.getSocketId();\n        this.sockets.push(socket);\n    }\n\n    setSocketByIndex(index, socket) {\n        socket.id = this.getSocketId();\n        this.sockets[index] = socket;\n    }\n\n    getSocketByIndex(index) {\n        return this.sockets[index];\n    }\n    \n    getSocketByName(name) {\n        return this.sockets.find(s => s.name === name);\n    }\n\n    removeSocket(socket) {\n        this.sockets = this.sockets.filter(s => s !== socket);\n    }\n\n    removeSocketById(id) {\n        this.sockets = this.sockets.filter(s => s.id !== id);\n    }\n\n    removeSocketByIndex(index) {\n        this.sockets = this.sockets.filter((s, i) => i !== index);\n    }\n\n}\n\nclass Socket {\n    constructor(options) {\n        this.name = options.name || 'socket';\n        this.state = options.state || {};\n        this.position = options.position || 'left';  \n    }\n}\n\nclass Link {\n    constructor(options) {\n        this.socket1 = options.socket1 || null;\n        this.socket2 = options.socket2 || null;\n        this.state = options.state || {};\n    }\n\n    getOtherSocket(socket) {\n        if (socket === this.socket1) {\n            return this.socket2;\n        } else if (socket === this.socket2) {\n            return this.socket1;\n        } else {\n            return null;\n        }\n    }\n}\n\nclass Log {\n    constructor(options) {\n        this.name = options.name || 'log';\n        this.target = options.target || null;\n        this.states = [];\n    }\n\n    writeToLog() {\n        this.states.push({...this.target.state});\n    }\n\n    clear() {\n        this.states = [];\n    }\n}\n\nexport { Link, Log, Model, Node, Socket };\n","import { Node } from 'visual-modeller-core';\n\nclass EnergyNode extends Node {\n    constructor(options) {\n        super(options);\n    }\n\n    setConstraints(){\n        return;\n    }\n    \n    updateState(){\n        return;\n    }\n}\n\n\nexport { EnergyNode };","import { EnergyNode } from \"./EnergyNode\";\n\nclass ControllerNode extends EnergyNode {\n    constructor(options) {\n        super(options);\n        this.class = 'controlNode';\n        this.type = 'controller';\n        this.inputSocketOrder = options.inputSocketOrder || []; // array of socket names\n        this.outputSocketOrder = options.outputSocketOrder || [];\n    }\n\n    setFluxTargets(){\n        //console.log(\"in setFluxTargets\");\n        const controllerInputSockets = this.inputSocketOrder.map(socketName => this.getSocketByName(socketName));\n        const controllerOutputSockets = this.outputSocketOrder.map(socketName => this.getSocketByName(socketName));\n        const inputConnectedSockets = controllerInputSockets.map( s => s.otherSocket);\n        const outputConnectedSockets = controllerOutputSockets.map( s => s.otherSocket);\n       // console.log(\"inputConnectedSockets\", inputConnectedSockets);\n        //console.log(\"outputConnectedSockets\", outputConnectedSockets);\n        let totalInput = inputConnectedSockets.filter( s => s.state.valueType == \"constraint\").reduce((acc, s) => acc + s.state.value, 0);\n        let totalOutput = outputConnectedSockets.filter( s => s.state.valueType == \"constraint\").reduce((acc, s) => acc + s.state.value, 0);\n        //console.log(\"totalInput\", totalInput);\n        //console.log(\"totalOutput\", totalOutput);\n        if (totalInput >= totalOutput){ // more supply than demand\n            outputConnectedSockets.forEach( s => {\n                if (s.state.valueType == \"constraint\"){\n                    const controllerSocket = s.otherSocket;\n                    controllerSocket.state.value = null;\n                    controllerSocket.state.valueType = \"variable\";\n                    controllerSocket.state.max = Infinity;\n                    totalInput -= s.state.value;\n                }\n            });\n            outputConnectedSockets.forEach( s => {\n                if (s.state.valueType == \"variable\"){\n                    const controllerSocket = s.otherSocket;\n                    const targetValue = Math.min(totalInput, s.state.max);\n                    controllerSocket.state.value = targetValue;\n                    controllerSocket.state.valueType = \"target\";\n                    totalInput -= targetValue;\n                }\n            });\n            inputConnectedSockets.forEach( s => {\n                if (s.state.valueType == \"constraint\"){\n                    const controllerSocket = s.otherSocket;\n                    controllerSocket.state.value = null;\n                    controllerSocket.state.valueType = \"variable\";\n                    controllerSocket.state.max = Infinity;\n                }\n                if (s.state.valueType == \"variable\"){\n                    const controllerSocket = s.otherSocket;\n                    controllerSocket.state.value = 0.;\n                    controllerSocket.state.valueType = \"target\";\n                }\n            });\n        } else { // more demand than supply\n            inputConnectedSockets.forEach( s => {\n                if (s.state.valueType == \"constraint\"){\n                    const controllerSocket = s.otherSocket;\n                    controllerSocket.state.value = null;\n                    controllerSocket.state.valueType = \"variable\";\n                    controllerSocket.state.max = Infinity;\n                    totalOutput -= s.state.value;\n                }\n            });\n            inputConnectedSockets.forEach( s => {\n                if (s.state.valueType == \"variable\"){\n                    const controllerSocket = s.otherSocket;\n                    const targetValue = Math.min(totalOutput, s.state.max);\n                    controllerSocket.state.value = targetValue;\n                    controllerSocket.state.valueType = \"target\";\n                    totalOutput -= targetValue;\n                }\n            });\n            outputConnectedSockets.forEach( s => {\n                if (s.state.valueType == \"constraint\"){\n                    const controllerSocket = s.otherSocket;\n                    controllerSocket.state.value = null;\n                    controllerSocket.state.valueType = \"variable\";\n                    controllerSocket.state.max = Infinity;\n                }\n                if (s.state.valueType == \"variable\"){\n                    const controllerSocket = s.otherSocket;\n                    controllerSocket.state.value = 0.;\n                    controllerSocket.state.valueType = \"target\";\n                }\n            });\n        }\n    }\n\n}\n\n\n\nexport { ControllerNode };","import { EnergyNode } from \"./EnergyNode\";\nimport { Socket } from 'visual-modeller-core';\n\nclass GridExportNode extends EnergyNode {\n    constructor(options) {\n        super(options);\n        this.class = 'endNode';\n        this.type = 'gridExport';\n        const socketOptions = {};\n        socketOptions.name = options.socketName || 'Grid Export';\n        socketOptions.position = options.position || 'left';\n        socketOptions.state = options.socketState || {max: Infinity, value:null, valueType: \"variable\"};\n        this.setSocketByIndex(0, new Socket(socketOptions));\n    }\n}\n\nexport { GridExportNode };","import { EnergyNode } from \"./EnergyNode\";\nimport { Socket } from 'visual-modeller-core';\n\nclass GridSupplyNode extends EnergyNode {\n    constructor(options) {\n        super(options);\n        this.class = 'endNode';\n        this.type = 'gridSupply';\n        const socketOptions = {};\n        socketOptions.name = options.socketName || 'Grid Supply';\n        socketOptions.position = options.position || 'right'; // output on right side\n        socketOptions.state = options.socketState || {max: Infinity, value:null, valueType: \"variable\"};\n        this.setSocketByIndex(0, new Socket(socketOptions)); // endNode so only one socket\n    }\n}\n\nexport { GridSupplyNode };","import { Link } from 'visual-modeller-core';\n\nclass EnergyLink extends Link {\n    constructor(options) {\n        super(options);\n    }\n\n    setFlux() {\n        const socket1 = this.socket1;\n        const state1 = socket1.state;\n        const socket2 = this.socket2;\n        const state2 = socket2.state;\n\n        //console.log(socket1, socket2);\n\n        if (state1.valueType == state2.valueType) {\n            console.log(\"warning - both sockets for this link have the same valueType\", this);\n        }\n\n        if (state2.valueType == \"variable\" && (state1.valueType == \"constraint\" || state1.valueType == \"target\")) {\n            if (state1.value <= state2.max) {\n                this.state.value = state1.value;\n            } else {\n                console.log(\"problem - variable value exceeds constraint max\", this);\n            }\n        }\n\n        if (state1.valueType == \"variable\" && (state2.valueType == \"constraint\" || state2.valueType == \"target\")) {\n            if (state2.value <= state1.max) {\n                this.state.value = state2.value;\n            } else {\n                console.log(\"problem - variable value exceeds constraint max\", this);\n            }\n        }\n\n    }\n\n}\n\nexport { EnergyLink };","import { EnergyNode } from \"./EnergyNode\";\nimport { Socket } from 'visual-modeller-core';\n\nclass LoadNode extends EnergyNode {\n    constructor(options) {\n        super(options);\n        this.class = 'endNode';\n        this.type = 'loadNode';\n        const socketOptions = {};\n        socketOptions.name = options.socketName || 'Load';\n        socketOptions.position = options.position || 'left'; // input on left side\n        socketOptions.state = options.socketState || {max: null, value:null, valueType: \"constraint\", timeVarying: false, timeSeries: null};\n        this.setSocketByIndex(0, new Socket(socketOptions)); // endNode so only one socket\n    }\n\n    setConstraints(data) {\n        const timeStep = data.timeStep;\n        const state = this.getSocketByIndex(0).state;\n        if (state.valueType !== \"constraint\") {\n            return;\n        }\n        if (state.timeVarying) {\n            state.value = state.timeSeries[timeStep];\n        } \n    }\n\n}\n\nexport { LoadNode };","import { Model } from 'visual-modeller-core';\n\nclass EnergyModel extends Model {\n    constructor(options) {\n        super(options);\n        this.timeVarying = options.timeVarying || false;\n        this.timeSteps = options.timeSteps || 1;\n        this.timeStep = 0;\n    }\n\n    run() {\n        const nodes = this.nodes;\n        const links = this.links;\n        const logs = this.logs;\n        const timeVarying = this.timeVarying;\n        const timeSteps = this.timeSteps;\n        if (!timeVarying) {\n            this.timeSteps = 1;\n        }\n\n        for (let i = 0; i < timeSteps; i++) {\n            this.timeStep = i;\n            // solution process:\n            //     allNodes - set fixed fluxes and flux limits - e.g. constrained fluxes\n            //     socket.state.fluxTarget is set\n\n            nodes.forEach(node => node.setConstraints({timeStep:i})); // needs to know time step\n\n            //     allControllerNodes - set flux targets on sockets\n\n            nodes.filter(node => node.type === 'controller').forEach(controllerNode => controllerNode.setFluxTargets());\n\n            //     allLinks - set fluxes using targets\n\n            links.forEach(link => link.setFlux());\n\n            //     allNodes - update state given current fluxes (e.g. battery)\n\n            nodes.forEach(node => node.updateState());\n\n            //    finally update logs\n            //    logs is array of objects {\"name\", [values]}\n\n            logs.forEach( log => log.writeToLog());\n            \n        }\n\n    }\n}\n\nexport { EnergyModel };\n\n\n\n","import { EnergyNode } from \"./EnergyNode\";\nimport { Socket } from 'visual-modeller-core';\n\nclass SolarPVNode extends EnergyNode {\n    constructor(options) {\n        super(options);\n        this.class = 'endNode';\n        this.type = 'solarPVNode';\n        const socketOptions = {};\n        socketOptions.name = options.socketName || 'Solar PV';\n        socketOptions.position = options.position || 'right'; // output on right side\n        socketOptions.state = options.socketState || {max: null, value:null, valueType: \"constraint\", timeVarying: false, timeSeries: null};\n        this.setSocketByIndex(0, new Socket(socketOptions)); // endNode so only one socket\n    }\n\n    setConstraints(data) {\n        const timeStep = data.timeStep;\n        const state = this.getSocketByIndex(0).state;\n        if (!state.valueType === \"constraint\") {\n            return;\n        }\n        if (state.timeVarying) {\n            state.value = state.timeSeries[timeStep];\n        } \n    }\n\n}\n\nexport { SolarPVNode };"],"names":["Model","constructor","options","this","nodes","links","logs","maxNodeId","maxLinkId","maxLogId","getNodeId","newNodeId","getLinkId","newLinkId","getLogId","newLogId","addNode","node","id","push","addLink","link","s1","socket1","otherSocket","socket2","s2","addLog","log","removeNode","filter","n","removeLink","l","removeLog","removeNodeById","removeLinkById","removeLogById","clearLogs","forEach","clear","getLinkBySocket","socket","find","getNodeBySocket","sockets","includes","Node","name","state","maxSocketId","addSocket","getSocketId","newSocketId","leftSockets","s","position","rightSockets","topSockets","bottomSockets","setSocketByIndex","index","getSocketByIndex","getSocketByName","removeSocket","removeSocketById","removeSocketByIndex","i","Socket","Link","getOtherSocket","EnergyNode","super","setConstraints","updateState","class","type","inputSocketOrder","outputSocketOrder","setFluxTargets","controllerInputSockets","map","socketName","controllerOutputSockets","inputConnectedSockets","outputConnectedSockets","totalInput","valueType","reduce","acc","value","totalOutput","controllerSocket","max","Infinity","targetValue","Math","min","socketOptions","socketState","setFlux","state1","state2","console","timeVarying","timeSeries","data","timeStep","target","states","writeToLog","timeSteps","run","controllerNode"],"mappings":"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","x_google_ignoreList":[0]}